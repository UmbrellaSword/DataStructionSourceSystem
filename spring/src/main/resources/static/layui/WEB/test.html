<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>在线测评</title>
    <link rel="stylesheet" href="../css/layui.css">
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/test.css">
    <script src="../layui.js"></script>
    <script src="../jquery.js"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">数据结构资源管理平台</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <li class="layui-nav-item"><a href="main.html">主页</a></li>
            <li class="layui-nav-item"><a href="selectedexperiment.html">已选实验</a></li>

            <li class="layui-nav-item"><a href="download.html">下载资源</a></li>
            <li class="layui-nav-item">
                <a href="javascript:;">其它</a>
                <dl class="layui-nav-child">
                    <dd><a href="">邮件管理</a></dd>
                    <dd><a href="">消息管理</a></dd>
                    <dd><a href="">授权管理</a></dd>
                </dl>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;" id="myselfid">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    腰果
                </a>
                <script>
                    document.getElementById("myselfid").innerHTML = "学号" +
                        sessionStorage.id;
                </script>
                <dl class="layui-nav-child">
                    <dd><a href="person.html">基本资料</a></dd>
                    <dd><a href="">安全设置</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a href="login.html">退出</a></li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree"  lay-filter="test">
                <li class="layui-nav-item"><a href="resource.html">数据结构资源</a></li>
                <li class="layui-nav-item"><a href="experiment.html">课程实验</a></li>
                <li class="layui-nav-item"><a href="question.html">网上答疑</a></li>
                <li class="layui-nav-item"><a href="task.html">作业区</a></li>
                <li class="layui-nav-item"><a href="test.html">习题自测</a></li>
            </ul>
        </div>
    </div>

    <div class="layui-body" id="mainbody">
        <div id="selectInwhat" class="layui-card">
            <div class="layui-card-body">
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                    <legend>课程练习 （章节选择）</legend>
                </fieldset>
                <ul class="selinwhat">
                    <blockquote inwhat="1" class="layui-elem-quote"><b>模块一</b>  数组</blockquote>
                    <blockquote inwhat="2" class="layui-elem-quote"><b>模块二</b>  栈</blockquote>
                    <blockquote inwhat="3" class="layui-elem-quote"><b>模块三</b>  队列</blockquote>
                    <blockquote inwhat="4" class="layui-elem-quote"><b>模块四</b>  链表</blockquote>
                    <blockquote inwhat="5" class="layui-elem-quote"><b>模块五</b>  树</blockquote>
                    <blockquote inwhat="6" class="layui-elem-quote"><b>模块六</b>  散列表</blockquote>
                    <blockquote inwhat="7" class="layui-elem-quote"><b>模块七</b>  堆</blockquote>
                    <blockquote inwhat="8" class="layui-elem-quote"><b>模块八</b>  图</blockquote>
                    <blockquote inwhat="0" class="layui-elem-quote">  全部内容  </blockquote>
                </ul>
            </div>
        </div>
        <div id="testdiv" class="layui-card layui-hide">
            <div class="layui-card-body">
                <!--nr start-->
                <div class="test_main">
                    <div class="nr_left">
                        <div class="test">
                            <form  method="post">
                                <div class="test_title">
                                    <span><input id="test_jiaojuan" type="button" name="test_jiaojuan" value="交卷"></span>
                                </div>

                                <div class="test_content">
                                    <div class="test_content_title">
                                        <h2>单选题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">15</i><span>题</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="test_content_nr">
                                    <ul>

                                        <!--li id="qu_0_0">
                                            <div class="test_content_nr_tt">
                                                <i>1</i><span>(1分)</span><span>在生产管理信息系统中，下列操作步骤能正确将工单推进流程的是（  ）</span>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer1"
                                                               id="0_answer_1_option_1"
                                                        />


                                                        <label for="0_answer_1_option_1">
                                                            A.
                                                            <p class="ue" style="display: inline;">在工具栏中点击“workflow”标签</p>
                                                        </label>
                                                    </li>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer1"
                                                               id="0_answer_1_option_2"
                                                        />


                                                        <label for="0_answer_1_option_2">
                                                            B.
                                                            <p class="ue" style="display: inline;">在缺陷单界面中点击“推进流程”按钮</p>
                                                        </label>
                                                    </li>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer1"
                                                               id="0_answer_1_option_3"
                                                        />


                                                        <label for="0_answer_1_option_3">
                                                            C.
                                                            <p class="ue" style="display: inline;">在缺陷单界面中点击“提交”按钮</p>
                                                        </label>
                                                    </li>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer1"
                                                               id="0_answer_1_option_4"
                                                        />


                                                        <label for="0_answer_1_option_4">
                                                            D.
                                                            <p class="ue" style="display: inline;">后台启动流程推进</p>
                                                        </label>
                                                    </li>

                                                </ul>
                                            </div>
                                        </li>

                                        <li id="qu_0_1">
                                            <div class="test_content_nr_tt">
                                                <i>2</i><span>(1分)</span><span>在营销系统中查询客户有无欠费、余额及抄表数据接待客户时应做到哪些最基本的礼仪？</span><b class="icon iconfont">&#xe881;</b>
                                            </div>

                                            <div class="test_content_nr_main">
                                                <ul>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer2"
                                                               id="0_answer_2_option_1"
                                                        />


                                                        <label for="0_answer_2_option_1">
                                                            A.
                                                            <p class="ue" style="display: inline;">起身、微笑、示坐、问候客户</p>
                                                        </label>
                                                    </li>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer2"
                                                               id="0_answer_2_option_2"
                                                        />


                                                        <label for="0_answer_2_option_2">
                                                            B.
                                                            <p class="ue" style="display: inline;">坐着，问候客户</p>
                                                        </label>
                                                    </li>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer2"
                                                               id="0_answer_2_option_3"
                                                        />


                                                        <label for="0_answer_2_option_3">
                                                            C.
                                                            <p class="ue" style="display: inline;">坐着，问候客户</p>
                                                        </label>
                                                    </li>

                                                    <li class="option">

                                                        <input type="radio" class="radioOrCheck" name="answer2"
                                                               id="0_answer_2_option_4"
                                                        />


                                                        <label for="0_answer_2_option_4">
                                                            D.
                                                            <p class="ue" style="display: inline;">请问需要办理什么业务</p>
                                                        </label>
                                                    </li>

                                                </ul>
                                            </div>
                                        </li-->

                                    </ul>
                                </div>


                            </form>
                        </div>

                    </div>
                    <div class="nr_right">
                        <div class="nr_rt_main">
                            <div class="rt_nr1">
                                <div class="rt_nr1_title">
                                    <h1>
                                        <i class="layui-icon layui-icon-tabs"></i>答题卡
                                    </h1>
                                    <p class="test_time">
                                        <i class="layui-icon layui-icon-flag"></i><b>第<span>一</span>章</b>
                                    </p>
                                    <button id="" class="layui-btn layui-btn-primary"><i class="layui-icon layui-icon-left"></i></button>
                                </div>

                                <div class="rt_content">
                                    <div class="rt_content_tt">
                                        <h2>单选题</h2>
                                        <p>
                                            <span>共</span><i class="content_lit">15</i><span>题</span>
                                        </p>
                                    </div>
                                    <div class="rt_content_nr answerSheet">
                                        <ul>

                                            <!--li><a href="#qu_0_0">1</a></li>

                                            <li><a href="#qu_0_1">2</a></li>

                                            <li><a href="#qu_0_2">3</a></li>

                                            <li><a href="#qu_0_3">4</a></li>

                                            <li><a href="#qu_0_4">5</a></li>

                                            <li><a href="#qu_0_5">6</a></li>

                                            <li><a href="#qu_0_6">7</a></li>

                                            <li><a href="#qu_0_7">8</a></li>

                                            <li><a href="#qu_0_8">9</a></li>

                                            <li><a href="#qu_0_9">10</a></li>

                                            <li><a href="#qu_0_10">11</a></li>

                                            <li><a href="#qu_0_11">12</a></li>

                                            <li><a href="#qu_0_12">13</a></li>

                                            <li><a href="#qu_0_13">14</a></li>

                                            <li><a href="#qu_0_14">15</a></li-->

                                        </ul>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
                <!--nr end-->
                <div class="foot"></div>
            </div>
        </div>
    </div>

    <div class="layui-footer">
        <!-- 底部固定区域 -->
        ©《数据结构》教学资源管理平台
    </div>
</div>

<script>
    //JavaScript代码区域

    var img = sessionStorage.getItem('username')+".jpg";
    $('#xiaoheadimg').attr('src',"/img/headimg/"+img);
    $('#username').text(sessionStorage.getItem('name'));
    layui.use('element', function(){
        var element = layui.element;
    });
    $("#mainbody").scrollTop(0);
    $('.selinwhat blockquote').on("click",function () {
        console.log($(this).attr('inwhat'));
        if($(this).attr('inwhat') === "0")
            $('.test_time span').parent().text(" 全部章节 ");
        else
            $('.test_time span').text(" "+ $(this).attr('inwhat') + " ");
        $.ajax({
            url: "/Test/selectTest",
            type: 'post',
            dataType: 'text',
            data: {num:15,type:1,inwhat:$(this).attr('inwhat')},
            success: function (data) {
                //console.log(data);
                var obj = JSON.parse(data);
                $('.content_lit').text(obj.length);
                //if(obj.code === "1")
                //{
                    $('.test_content_nr ul:first').html("");
                    $(".answerSheet ul:first").html("");
                    for(var i = 0;i < obj.length; i++)
                    {
                        $('.test_content_nr ul:first').append('<li id="qu_0_'+ i +'">' +
                            '<div class="test_content_nr_tt"><i>'+ (i+1) + '</i><span>(1分)</span><span>'+ obj[i].question + '</span><b></b></div>' +
                            '<div class="test_content_nr_main"><ul>' +
                            '<li class="option"><input type="radio" class="radioOrCheck" name="answer'+ (i+1) +'" value="A" id="0_answer_'+ (i+1) +'_option_1"/>' +
                            '<label for="0_answer_'+ (i+1) +'_option_1">A.<p class="ue" style="display: inline;">'+ obj[i].answerA +'</p></label></li>' +
                            '<li class="option"><input type="radio" class="radioOrCheck" name="answer'+ (i+1) +'" value="B" id="0_answer_'+ (i+1) +'_option_2"/>' +
                            '<label for="0_answer_'+ (i+1) +'_option_2">B.<p class="ue" style="display: inline;">'+ obj[i].answerB +'</p></label></li>' +
                            '<li class="option"><input type="radio" class="radioOrCheck" name="answer'+ (i+1) +'" value="C" id="0_answer_'+ (i+1) +'_option_3"/>' +
                            '<label for="0_answer_'+ (i+1) +'_option_3">C.<p class="ue" style="display: inline;">'+ obj[i].answerC +'</p></label></li>' +
                            '<li class="option"><input type="radio" class="radioOrCheck" name="answer'+ (i+1) +'" value="D" id="0_answer_'+ (i+1) +'_option_4"/>' +
                            '<label for="0_answer_'+ (i+1) +'_option_4">D.<p class="ue" style="display: inline;">'+ obj[i].answerD +'</p></label></li>' +
                            '</ul></div></li>');
                        $(".answerSheet ul").append('<li><a href="#qu_0_'+ i +'">'+ (i+1) +'</a></li>\n\n\t\t\t\t\t\t\t\t\t\t\t');
                    }
                //}
                //else
                    //layer.msg(obj.msg);
                $(function() {
                    $('li.option input').click(function() {
                        var examId = $(this).closest('.test_content_nr_main').closest('li').attr('id'); // 得到题目ID
                        var cardLi = $('a[href="#' + examId + '"]'); // 根据题目ID找到对应答题卡
                        // 设置已答题
                        if(!cardLi.hasClass('hasBeenAnswer')){
                            cardLi.addClass('hasBeenAnswer');
                        }

                    });
                });
                $('#test_jiaojuan').on("click",function () {
                    $("#mainbody").scrollTop(0);
                    for(i = 0;i < obj.length;i ++)
                    {
                        //$(".test_content_nr>ul>li").eq(i).find("input:radio:checked").siblings().css("background","#000");
                        console.log($(".test_content_nr>ul>li").eq(i).find("input:radio:checked").val());
                        if(obj[i].answer === $(".test_content_nr>ul>li").eq(i).find("input:radio:checked").val())
                        {
                            $(".test_content_nr>ul>li").eq(i).addClass('testdui').removeClass('testcuo');
                            $(".answerSheet ul a").eq(i).addClass('testdui').removeClass('testcuo');
                        }
                        else
                        {
                            $(".test_content_nr>ul>li").eq(i).addClass('testcuo').removeClass('testdui');
                            $(".answerSheet ul a").eq(i).addClass('testcuo').removeClass('testdui');
                            $(".test_content_nr>ul>li").eq(i).find("b").text("正确答案：" + obj[i].answer);
                        }
                    }
                })
            }
        });

        $('#selectInwhat').addClass('layui-hide').removeClass('layui-show');
        $('#testdiv').removeClass('layui-hide').addClass('layui-show');

    });

    $('.rt_nr1_title button').on("click",function () {
        $('#testdiv').addClass('layui-hide').removeClass('layui-show');
        $('#selectInwhat').removeClass('layui-hide').addClass('layui-show');
        $("#mainbody").scrollTop(0);
    });

    /*$(function() {
        $('li.option input').click(function() {
            var examId = $(this).closest('.test_content_nr_main').closest('li').attr('id'); // 得到题目ID
            var cardLi = $('a[href="#' + examId + '"]'); // 根据题目ID找到对应答题卡
            // 设置已答题
            if(!cardLi.hasClass('hasBeenAnswer')){
                cardLi.addClass('hasBeenAnswer');
            }

        });
    });*/
</script>

</body>
</html>